###############################################################################
# CONTACTS.CFG - CONTACTS & CONTACT GROUPS
###############################################################################

<% @contactgroups = [] %>

<% @contacts.each do |c| %>
<% c[:nagios_contact_groups] |= %w(everyone) %>
<% @contactgroups |= c[:nagios_contact_groups] %>
define contact {
  use generic-contact
  contact_name <%= c[:id] %>
  alias <%= c[:comment] %>
  email <%= c[:email] %>
<% if c.include?(:pager) %>
  pager <%= c[:pager] %>
<% end %>
  contactgroups <%= c[:nagios_contact_groups].sort.join(",") %>
  service_notification_period <%= c[:id] %>-on-call
  host_notification_period <%= c[:id] %>-on-call
}

define contact {
  use generic-contact
  contact_name <%= c[:id] %>-emergency
  alias <%= c[:comment] %>
  email <%= c[:email] %>
<% if c.include?(:pager) %>
  pager <%= c[:pager] %>
<% end %>
  contactgroups <%= c[:nagios_contact_groups].sort.join(",") %>
  service_notification_period 24x7
  host_notification_period 24x7
}
<% end %>

<% @contactgroups.each do |cg| %>
define contactgroup {
  contactgroup_name <%= cg %>
  alias <%= cg %>
}
<% end %>
